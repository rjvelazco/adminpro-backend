{"version":3,"sources":["./src/app/pages/child-routes.module.ts","./src/app/guards/admin.guard.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AAEc;AACoB;AACvB;AACA;AACN;AAK5D,iBAAiB;AACsE;AACT;AACF;AACK;AAEjF,SAAS;AAC0C;;;AAGnD,MAAM,WAAW,GAAW;IAC1B,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,iFAAkB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,WAAW,EAAC,EAAE;IACxE,EAAE,IAAI,EAAE,kBAAkB,EAAE,SAAS,EAAE,qGAAwB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,MAAM,EAAC,EAAC;IACxF,EAAE,IAAI,EAAE,iBAAiB,EAAE,SAAS,EAAE,8EAAiB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,UAAU,EAAC,EAAC;IACpF,EAAE,IAAI,EAAE,UAAU,EAAE,SAAS,EAAE,8EAAiB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,SAAS,EAAC,EAAC;IAC5E,EAAE,IAAI,EAAE,QAAQ,EAAE,SAAS,EAAE,wEAAe,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,QAAQ,EAAE,EAAE;IAC1E,oFAAoF;IACpF,iFAAiF;IACjF,qEAAqE;IAErE,iBAAiB;IACjB,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,mGAAmB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,YAAY,EAAC,EAAC;IACnF,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAE,0FAAgB,EAAE,IAAI,EAAE,EAAC,MAAM,EAAE,SAAS,EAAC,EAAC;IAC1E,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,wFAAe,EAAE,IAAI,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE;IAE/E,iBAAiB;IACjB;QACE,IAAI,EAAE,UAAU;QAChB,WAAW,EAAE,CAAC,+DAAU,CAAC;QACzB,SAAS,EAAE,8FAAiB;QAC5B,IAAI,EAAE,EAAE,MAAM,EAAE,UAAU,EAAE;KAC7B;CAEF;AAMM,MAAM,iBAAiB;;gGAAjB,iBAAiB;4JAAjB,iBAAiB,kBAHnB,CAAE,4DAAY,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,EACnC,4DAAY;mIAEZ,iBAAiB,uFAFjB,4DAAY;6FAEZ,iBAAiB;cAJ7B,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAE,4DAAY,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;gBAC9C,OAAO,EAAE,CAAE,4DAAY,CAAE;aAC1B;;;;;;;;;;;;;;AClDD;AAAA;AAAA;AAAA;AAAA;AAA2C;;;;AAWpC,MAAM,UAAU;IAErB,YACU,cAA8B,EAC9B,MAAc;QADd,mBAAc,GAAd,cAAc,CAAgB;QAC9B,WAAM,GAAN,MAAM,CAAQ;IACpB,CAAC;IAEL,WAAW,CACT,KAA6B,EAC7B,KAA0B;QAG1B,IAAI,IAAI,CAAC,cAAc,CAAC,IAAI,KAAK,YAAY,EAAE;YAC7C,OAAO,IAAI,CAAC;SACb;aAAM;YACL,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;YACxC,OAAO,KAAK,CAAC;SACd;IACH,CAAC;;oEAlBU,UAAU;6FAAV,UAAU,WAAV,UAAU,mBAFT,MAAM;6FAEP,UAAU;cAHtB,wDAAU;eAAC;gBACV,UAAU,EAAE,MAAM;aACnB","file":"child-routes-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DashboardComponent } from './dashboard/dashboard.component';\r\nimport { AccountSettingsComponent } from './account-settings/account-settings.component';\r\nimport { BusquedaComponent } from './busqueda/busqueda.component';\r\nimport { Grafica1Component } from './grafica1/grafica1.component';\r\nimport { PerfilComponent } from './perfil/perfil.component';\r\nimport { ProgressComponent } from './progress/progress.component';\r\nimport { PromesasComponent } from './promesas/promesas.component';\r\nimport { RxjsComponent } from './rxjs/rxjs.component';\r\n\r\n// Mantenimientos\r\nimport { HospitalesComponent } from './mantenimientos/hospitales/hospitales.component';\r\nimport { MedicosComponent } from './mantenimientos/medicos/medicos.component';\r\nimport { MedicoComponent } from './mantenimientos/medicos/medico.component';\r\nimport { UsuariosComponent } from './mantenimientos/usuarios/usuarios.component';\r\n\r\n// Guards\r\nimport { AdminGuard } from '../guards/admin.guard';\r\n\r\n\r\nconst childRoutes: Routes = [\r\n  { path: '', component: DashboardComponent, data: {titulo: 'Dashboard'} },\r\n  { path: 'account-settings', component: AccountSettingsComponent, data: {titulo: 'Tema'}},\r\n  { path: 'buscar/:termino', component: BusquedaComponent, data: {titulo: 'Busqueda'}},\r\n  { path: 'grafica1', component: Grafica1Component, data: {titulo: 'Grafica'}},\r\n  { path: 'perfil', component: PerfilComponent, data: { titulo: 'Perfil' } },\r\n  // { path: 'progress', component: ProgressComponent, data: {titulo: 'ProgressBar'}},\r\n  // { path: 'promesas', component: PromesasComponent, data: {titulo: 'Promesas'}},\r\n  // { path: 'rxjs', component: RxjsComponent, data: {titulo: 'Rxjs'}},\r\n  \r\n  // Mantenimientos\r\n  { path: 'hospitales', component: HospitalesComponent, data: {titulo: 'hospitales'}},\r\n  { path: 'medicos', component: MedicosComponent, data: {titulo: 'medicos'}},\r\n  { path: 'medico/:id', component: MedicoComponent, data: { titulo: 'medicos' } },\r\n  \r\n  // Rutas de Admin\r\n  {\r\n    path: 'usuarios',\r\n    canActivate: [AdminGuard],\r\n    component: UsuariosComponent,\r\n    data: { titulo: 'usuarios' }\r\n  },\r\n  // { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\r\n]\r\n\r\n@NgModule({\r\n  imports: [ RouterModule.forChild(childRoutes)],\r\n  exports: [ RouterModule ]\r\n})\r\nexport class ChildRoutesModule { }\r\n","import { Injectable } from '@angular/core';\r\nimport { CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, Router } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\n\r\n// Services\r\nimport { UsuarioService } from '../services/usuario.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdminGuard implements CanActivate {\r\n  \r\n  constructor(\r\n    private usuarioService: UsuarioService,\r\n    private router: Router\r\n  ) { }\r\n  \r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): boolean {\r\n  \r\n    if (this.usuarioService.role === \"ADMIN_ROLE\") {\r\n      return true;\r\n    } else {\r\n      this.router.navigateByUrl('/dashboard');\r\n      return false;\r\n    }\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":"webpack:///"}